# æ³¢å…‹å¤æŠ•è³‡çµ„åˆè‡ªå‹•åŒ–ç³»çµ± - å®Œæ•´éƒ¨ç½²æŒ‡å—

## ğŸ¯ ä¸€éµéƒ¨ç½²æµç¨‹ï¼ˆ5åˆ†é˜å®Œæˆï¼‰

### æ­¥é©Ÿ 1: è¨­å®š GitHub Secrets

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ GitHub CLIï¼ˆæœ€æ¨è–¦ï¼‰**

```bash
# 1. å®‰è£ GitHub CLI
brew install gh  # macOS
# æˆ– winget install GitHub.cli  # Windows

# 2. ç™»å…¥
gh auth login

# 3. è¨­å®šå¿…è¦çš„ Secrets
gh secret set TELEGRAM_CHAT_ID -b "poh910" -R poh429/portfolio-automation
gh secret set SPREADSHEET_ID -b "YOUR_SPREADSHEET_ID" -R poh429/portfolio-automation
gh secret set TELEGRAM_BOT_TOKEN -b "YOUR_BOT_TOKEN" -R poh429/portfolio-automation

# 4. è¨­å®š Google Sheets æ†‘è­‰ï¼ˆå¾æª”æ¡ˆè®€å–ï¼‰
gh secret set GOOGLE_SHEETS_CREDENTIALS < google_credentials.json -R poh429/portfolio-automation
```

**æ–¹å¼äºŒï¼šç¶²é æ‰‹å‹•è¨­å®šï¼ˆæœ€ç°¡å–®ï¼‰**

1. å‰å¾€ https://github.com/poh429/portfolio-automation/settings/secrets/actions
2. é»æ“Šã€ŒNew repository secretã€
3. é€ä¸€æ–°å¢ä»¥ä¸‹ secretsï¼š

| Secret Name | Value | èªªæ˜ |
|------------|-------|------|
| `TELEGRAM_CHAT_ID` | `poh910` | Telegram é€šçŸ¥å°è±¡ |
| `SPREADSHEET_ID` | ä½ çš„è©¦ç®—è¡¨ID | Google Sheets URL ä¸­çš„ ID |
| `TELEGRAM_BOT_TOKEN` | Bot Token | å¾ @BotFather å–å¾— |
| `GOOGLE_SHEETS_CREDENTIALS` | JSON å…§å®¹ | Google Service Account æ†‘è­‰ |

### æ­¥é©Ÿ 2: è¨­å®šæŒå€‰æª”æ¡ˆ

åœ¨ repo ä¸­å»ºç«‹ `data/config/portfolio_holdings.json`ï¼š

```json
{
  "taiwan_stocks": {
    "2330": {"name": "å°ç©é›»", "shares": 100},
    "2454": {"name": "è¯ç™¼ç§‘", "shares": 50}
  },
  "us_stocks": {
    "AAPL": {"name": "Apple", "shares": 10},
    "GOOGL": {"name": "Google", "shares": 5}
  }
}
```

### æ­¥é©Ÿ 3: æ¸¬è©¦ Workflow

**æ‰‹å‹•è§¸ç™¼æ¸¬è©¦ï¼š**

```bash
# æ–¹å¼ 1: ä½¿ç”¨ GitHub CLI
gh workflow run portfolio-health-check.yml -R poh429/portfolio-automation

# æ–¹å¼ 2: åœ¨ç¶²é ä¸Šæ“ä½œ
# å‰å¾€ https://github.com/poh429/portfolio-automation/actions
# é¸æ“‡ "Portfolio Health Check" workflow
# é»æ“Š "Run workflow" æŒ‰éˆ•
```

**æŸ¥çœ‹åŸ·è¡Œçµæœï¼š**

```bash
gh run list -R poh429/portfolio-automation
gh run view <run-id> -R poh429/portfolio-automation
```

### æ­¥é©Ÿ 4: é©—è­‰è‡ªå‹•æ’ç¨‹

Workflow æœƒåœ¨æ¯å¤©å°åŒ—æ™‚é–“ 14:00 (UTC 06:00) è‡ªå‹•åŸ·è¡Œã€‚

**æª¢æŸ¥ä¸‹æ¬¡åŸ·è¡Œæ™‚é–“ï¼š**
- å‰å¾€ Actions é é¢å¯ä»¥çœ‹åˆ°æ’ç¨‹ç‹€æ…‹
- ç¬¬ä¸€æ¬¡è‡ªå‹•åŸ·è¡Œå°‡åœ¨è¨­å®šå¾Œçš„éš”å¤© 14:00 é€²è¡Œ

---

## ğŸ”§ ç–‘é›£æ’è§£

### å•é¡Œ 1: Workflow åŸ·è¡Œå¤±æ•—

**æª¢æŸ¥æ¸…å–®ï¼š**
1. âœ… æ‰€æœ‰ 4 å€‹ Secrets éƒ½å·²è¨­å®š
2. âœ… `portfolio_holdings.json` æª”æ¡ˆå­˜åœ¨ä¸”æ ¼å¼æ­£ç¢º
3. âœ… Google Sheets API å·²å•Ÿç”¨
4. âœ… Service Account æœ‰è©¦ç®—è¡¨çš„ç·¨è¼¯æ¬Šé™

**æŸ¥çœ‹è©³ç´°éŒ¯èª¤ï¼š**
```bash
gh run view --log -R poh429/portfolio-automation
```

### å•é¡Œ 2: Google Sheets ç„¡æ³•æ›´æ–°

**åŸå› ï¼š** Service Account æ²’æœ‰æ¬Šé™

**è§£æ±ºæ–¹å¼ï¼š**
1. é–‹å•Ÿä½ çš„ Google Sheets
2. é»æ“Šã€Œå…±ç”¨ã€
3. å°‡ Service Account emailï¼ˆåœ¨ credentials.json ä¸­çš„ `client_email`ï¼‰åŠ å…¥ç·¨è¼¯è€…

### å•é¡Œ 3: Telegram é€šçŸ¥æ²’æ”¶åˆ°

**æª¢æŸ¥ï¼š**
```bash
# æ¸¬è©¦ Bot Token æ˜¯å¦æœ‰æ•ˆ
curl https://api.telegram.org/bot<YOUR_TOKEN>/getMe

# æ¸¬è©¦ç™¼é€è¨Šæ¯
curl -X POST https://api.telegram.org/bot<YOUR_TOKEN>/sendMessage \
  -d "chat_id=poh910" \
  -d "text=æ¸¬è©¦è¨Šæ¯"
```

---

## ğŸ“Š è³‡æ–™æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Actions  â”‚ æ¯æ—¥ 14:00 è§¸ç™¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€> 1. æŠ“å–å°è‚¡å³æ™‚æ•¸æ“š (yfinance)
         â”‚
         â”œâ”€> 2. åŸ·è¡Œå”çŸ³å³»16æŒ‡æ¨™åˆ†æ
         â”‚      â””â”€> ç”¢ç”Ÿ tang_scores.json
         â”‚
         â”œâ”€> 3. åŸ·è¡Œ Henry é¢¨éšªè©•ä¼°
         â”‚      â””â”€> ç”¢ç”Ÿ risk_levels.json
         â”‚
         â”œâ”€> 4. ç”Ÿæˆç¶œåˆå ±å‘Š
         â”‚      â””â”€> ç”¢ç”Ÿ portfolio_report.md
         â”‚
         â”œâ”€> 5. æ›´æ–° Google Sheets
         â”‚      â””â”€> å¯«å…¥åˆ†æçµæœ
         â”‚
         â””â”€> 6. ç™¼é€ Telegram é€šçŸ¥
                â””â”€> åŸ·è¡Œçµæœæ‘˜è¦
```

---

## ğŸš€ é€²éšè¨­å®š

### è‡ªè¨‚åŸ·è¡Œæ™‚é–“

ç·¨è¼¯ `.github/workflows/portfolio-health-check.yml`ï¼š

```yaml
on:
  schedule:
    # æ”¹æˆä½ æƒ³è¦çš„æ™‚é–“ï¼ˆUTC æ™‚å€ï¼‰
    - cron: '0 6 * * *'  # å°åŒ—æ™‚é–“ 14:00
    - cron: '0 1 * * *'  # å°åŒ—æ™‚é–“ 09:00ï¼ˆé–‹ç›¤å‰ï¼‰
```

### æ–°å¢æ›´å¤šåˆ†ææŒ‡æ¨™

1. åœ¨ `scripts/general/` æ–°å¢åˆ†æè…³æœ¬
2. åœ¨ workflow ä¸­åŠ å…¥åŸ·è¡Œæ­¥é©Ÿ
3. æ›´æ–° `generate_portfolio_report.py` æ•´åˆçµæœ

### æ•´åˆå…¶ä»–é€šçŸ¥æ¸ é“

æ”¯æ´ï¼š
- Emailï¼ˆé€é GitHub Actionsï¼‰
- Discord Webhook
- Line Notify
- Slack Webhook

---

## âœ… å®Œæˆæª¢æŸ¥è¡¨

éƒ¨ç½²å®Œæˆå¾Œï¼Œè«‹ç¢ºèªï¼š

- [ ] æ‰€æœ‰ GitHub Secrets å·²è¨­å®š
- [ ] æŒå€‰æª”æ¡ˆ `portfolio_holdings.json` å·²å»ºç«‹
- [ ] æ‰‹å‹•è§¸ç™¼æ¸¬è©¦æˆåŠŸåŸ·è¡Œ
- [ ] Google Sheets æœ‰æ­£ç¢ºæ›´æ–°
- [ ] Telegram æ”¶åˆ°åŸ·è¡Œé€šçŸ¥
- [ ] è‡ªå‹•æ’ç¨‹å·²å•Ÿç”¨ï¼ˆActions é é¢å¯è¦‹ï¼‰

---

## ğŸ“ æ”¯æ´

æœ‰å•é¡Œï¼Ÿæª¢æŸ¥ï¼š
1. [GitHub Actions åŸ·è¡Œæ—¥èªŒ](https://github.com/poh429/portfolio-automation/actions)
2. [å®Œæ•´æ–‡æª”](docs/GitHub-Actions-éƒ¨ç½²æŒ‡å—.md)
3. æˆ–è¯çµ¡é–‹ç™¼è€…

**Repo URL:** https://github.com/poh429/portfolio-automation